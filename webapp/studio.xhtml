<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Studio Professor</title>
    <h:outputStylesheet library="ifba" name="styles/studio.css" />
    <f:event type="preRenderView" listener="#{professorStudioBean.checkProfessorLogin}" />
</h:head>
<h:body>
    <div class="container">
        <h1>Bem-vindo, Professor #{authenticationService.getProfessorLogado().nome}! Tudo bem?</h1>

        <h:messages globalOnly="true" styleClass="messages" infoClass="info" errorClass="error" />

        <div class="form-section">
            <h:form enctype="multipart/form-data">
                <div class="form-group">
                    <h:outputLabel value="Selecione o Curso:" for="cursoSelect" />
                    <h:selectOneMenu id="cursoSelect" value="#{professorStudioBean.idCursoSelecionado}">
                        <f:selectItems value="#{professorStudioBean.cursos}" var="c" itemLabel="#{c.titulo}"
                            itemValue="#{c.idCurso}" />
                    </h:selectOneMenu>
                </div>

                <div class="form-group">
                    <h:outputLabel value="Título da Aula:" for="titulo" />
                    <h:inputText id="titulo" value="#{professorStudioBean.titulo}" />
                </div>

                <div class="form-group">
                    <h:outputLabel value="Vídeo:" />

                    <div class="file-upload-wrapper">
                        <h:inputFile id="video" value="#{professorStudioBean.videoPart}" accept="video/*" />

                        <h:outputLabel for="video" styleClass="file-upload-label">

                            <span class="file-name-display">
                                Nenhum arquivo selecionado
                            </span>

                            <span class="choose-btn">
                                Escolher arquivo
                            </span>

                        </h:outputLabel>
                    </div>
                </div>


                <h:commandButton value="Adicionar Aula" action="#{professorStudioBean.adicionarAula}"
                    styleClass="command-button" />
            </h:form>
        </div>

        <div class="form-section">
            <h:form>
                <div class="form-group">
                    <h:outputLabel value="Selecione a Aula para Remover:" for="aulaRemover" />
                    <h:selectOneMenu id="aulaRemover" value="#{professorStudioBean.idAulaRemover}">
                        <f:selectItems value="#{professorStudioBean.aulas}" var="a"
                            itemLabel="#{a.titulo} (ID: #{a.idAula})" itemValue="#{a.idAula}" />
                    </h:selectOneMenu>
                </div>

                <h:commandButton value="Remover Aula" action="#{professorStudioBean.removerAula}"
                    styleClass="command-button remove-button" />
            </h:form>
        </div>

        <h:dataTable value="#{professorStudioBean.aulas}" var="aula" styleClass="data-table">
            <h:column>
                <f:facet name="header">Título da Aula</f:facet>
                #{aula.titulo}
            </h:column>
            <h:column>
                <f:facet name="header">Curso Designado</f:facet>
                #{professorStudioBean.getCursoTitulo(aula.idCurso)}
            </h:column>
            <h:column>
                <f:facet name="header">Vídeo</f:facet>
                <video src="#{aula.video}" controls="controls" width="320" height="180">
                    Seu navegador não suporta a tag de vídeo.
                </video>
            </h:column>
            <h:column>
                <f:facet name="header">Número da Aula</f:facet>
                #{aula.aulasNumero}
            </h:column>
        </h:dataTable>
    </div>
</h:body>

</html>